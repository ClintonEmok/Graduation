# Milestone v1.0: Thesis Prototype

**Status:** ✅ SHIPPED 2026-02-07
**Phases:** 01-25
**Total Plans:** 82 plans (79 completed, 3 gap closure)

## Overview

Complete interactive web prototype for graduation thesis demonstrating adaptive time scaling in Space-Time Cube visualization. The system successfully implements coordinated multi-view exploration (Map, 3D Cube, Timeline) with density-based time warping to reveal patterns hidden in traditional uniform time mappings.

## Phases

### Phase 01: Core 3D Visualization

**Goal**: Users can view and navigate the 3D environment with mock data.
**Depends on**: None (foundation)
**Plans**: 5 plans

Plans:
- [x] 01-01: Three.js + React Three Fiber setup
- [x] 01-02: Basic cube environment with lighting
- [x] 01-03: Camera controls (orbit, zoom, pan)
- [x] 01-04: Mock data generation and visualization
- [x] 01-05: Map/Abstract view toggle

**Details:**
- Foundation phase establishing 3D rendering infrastructure
- CameraControls for intuitive navigation
- Mock data pipeline for development

### Phase 02: Temporal Controls

**Goal**: Users can manipulate time flow (play, pause, scrub) in the linear view.
**Depends on**: Phase 01
**Plans**: 3 plans

Plans:
- [x] 02-01: Time store and state management
- [x] 02-02: Animation loop and controls
- [x] 02-03: Time-based filtering and highlighting

**Details:**
- Zustand-based time store with play/pause/scrub
- Shader-based time window highlighting
- Smooth animation at 60fps

### Phase 03: Adaptive Scaling Logic

**Goal**: Users can toggle between linear and adaptive time (density-based deformation).
**Depends on**: Phase 02
**Plans**: 1 plan

Plans:
- [x] 03-01: Density calculation and warping algorithms

**Details:**
- Kernel Density Estimation foundation
- Linear blend between uniform and adaptive modes
- GPU-ready data structures

### Phase 04: UI Layout Redesign

**Goal**: Users interact with a polished, research-grade interface with improved layout stability.
**Depends on**: Phase 03
**Plans**: 6 plans

Plans:
- [x] 04-01: Dashboard layout structure
- [x] 04-02: Resizable panels
- [x] 04-03: Timeline panel integration
- [x] 04-04: 3D cube container
- [x] 04-05: Map panel
- [x] 04-06: Layout polish and responsive design

**Details:**
- React-resizable-panels for flexible layout
- Top (Map/Cube) / Bottom (Timeline) structure
- Research-grade UI polish

### Phase 05: Adaptive Visualization Aids

**Goal**: Users can understand the adaptive scaling through visual cues.
**Depends on**: Phase 04
**Plans**: 3 plans

Plans:
- [x] 05-01: Ghosting shader for context visibility
- [x] 05-02: Focus+Context techniques
- [x] 05-03: Visual deformation indicators

**Details:**
- Dithered transparency for unselected points
- Context opacity controls
- Visual cues for time deformation

### Phase 06: Data Backend Loading

**Goal**: System serves and loads real Chicago crime data efficiently.
**Depends on**: Phase 05
**Plans**: 4 plans

Plans:
- [x] 06-01: DuckDB integration
- [x] 06-02: Arrow IPC streaming API
- [x] 06-03: Columnar data store
- [x] 06-04: Frontend data loading

**Details:**
- DuckDB for server-side queries
- Apache Arrow IPC for binary streaming
- Float32Array/Uint8Array columnar storage
- Handles 1.2M records efficiently

### Phase 07: Advanced Filtering

**Goal**: Users can slice the data by attributes and geography.
**Depends on**: Phase 06
**Plans**: 7 plans

Plans:
- [x] 07-01: Filter store architecture
- [x] 07-02: Type/district filtering UI
- [x] 07-03: Time range filtering
- [x] 07-04: Spatial boundary selection
- [x] 07-05: Filter preset system
- [x] 07-06: Preset persistence (localStorage)
- [x] 07-07: Faceted search integration

**Details:**
- Multi-faceted filtering (type, district, time, spatial)
- Filter presets with save/load/delete
- Shader-based filtering for performance
- Geographic boundary selection on map

### Phase 08: Coordinated Views

**Goal**: Users experience synchronized exploration across Map, Cube, and Timeline.
**Depends on**: Phase 07
**Plans**: 3 plans

Plans:
- [x] 08-01: Selection coordination store
- [x] 08-02: Cross-view highlighting
- [x] 08-03: Timeline-Cube sync

**Details:**
- Centralized selection state
- Bidirectional sync across all views
- Map, Cube, Timeline all interconnected

### Phase 09: Logging/Study (Partial)

**Goal**: System tracks user interactions for thesis analysis.
**Depends on**: Phase 08
**Plans**: 2 plans

Plans:
- [x] 09-00: Data preparation (SUMMARY exists)
- [x] 09-01: Interaction logging system
- [x] 09-01-optimization: Performance optimization
- [x] 09-02: Study infrastructure (partial)

**Details:**
- Interaction logging with timestamps
- Participant ID management
- Export capabilities for analysis

### Phase 10: Study Content (DEFERRED)

**Goal**: Guided tasks and tutorials for user study.
**Depends on**: Phase 09
**Plans**: 0 plans completed

**Details:**
- Intentionally deferred to prioritize core visualization
- Thesis proceeds with free exploration mode

### Phase 11: Focus+Context

**Goal**: Implement Focus+Context visualization techniques.
**Depends on**: Phase 08
**Plans**: 1 plan

Plans:
- [x] 11-01: Focus+Context implementation

**Details:**
- Dithered transparency for context points
- Eye icon toggle for context visibility
- Smooth opacity transitions

### Phase 12: Feature Flags

**Goal**: System supports toggling experimental features via settings panel.
**Depends on**: Phase 11
**Plans**: 3 plans

Plans:
- [x] 12-01: Feature flag store
- [x] 12-02: Settings panel UI
- [x] 12-03: URL sharing and conflict resolution

**Details:**
- 6 feature flags: timeSlices, heatmap, trajectories, clustering, aggregatedBins, colorSchemes
- localStorage persistence
- URL-based sharing with conflict dialog

### Phase 13: UI Polish

**Goal**: Users experience a polished, responsive interface.
**Depends on**: Phase 12
**Plans**: 3 plans

Plans:
- [x] 13-01: Onboarding tour (driver.js)
- [x] 13-02: Toast notifications (sonner)
- [x] 13-03: Floating toolbar with tooltips

**Details:**
- First-time user onboarding
- Clear feedback via toasts
- Draggable floating toolbar

### Phase 14: Color Schemes & Accessibility

**Goal**: Support for colorblind-friendly schemes and accessibility.
**Depends on**: Phase 13
**Plans**: 1 plan (combined 14 + 14-color-accessibility)

Plans:
- [x] 14: Color schemes and accessibility

**Details:**
- Multiple color schemes including colorblind-friendly
- High contrast mode support

### Phase 15: Time Slices Visualization

**Goal**: Users can see horizontal planes showing temporal cross-sections.
**Depends on**: Phase 14
**Plans**: 5 plans

Plans:
- [x] 15-01: Slice plane rendering
- [x] 15-02: Interactive dragging
- [x] 15-03: Feature flag integration
- [x] 15-04: Range slices (slabs)
- [x] 15-05: Date picker integration

**Details:**
- Semi-transparent horizontal planes
- Drag to reposition
- Point and range slice modes
- Calendar UI for date selection

### Phase 16: Heatmap Layer

**Goal**: Users can view 2D density overlay on the map.
**Depends on**: Phase 15
**Plans**: 3 plans

Plans:
- [x] 16-01: Heatmap GPGPU engine
- [x] 16-02: Map synchronization
- [x] 16-03: Heatmap controls UI

**Details:**
- GPGPU-based density calculation
- Cyan-white monochromatic ramp
- Logarithmic scaling for hotspot detail
- Respects all filters

### Phase 17: Cluster Highlighting

**Goal**: Users can auto-detect and label dense regions.
**Depends on**: Phase 16
**Plans**: 3 plans

Plans:
- [x] 17-01: DBSCAN clustering engine
- [x] 17-02: 3D bounding boxes and labels
- [x] 17-03: 2D map cluster highlights

**Details:**
- DBSCAN with 3D spatial-temporal proximity
- Adaptive-aware clustering
- Click label to zoom
- Cross-view synchronization

### Phase 18: Trajectories Visualization

**Goal**: Users can see connected paths showing event sequences.
**Depends on**: Phase 17
**Plans**: 4 plans

Plans:
- [x] 18-01: Block-based data preparation
- [x] 18-02: Trajectory calculation
- [x] 18-03: 3D trajectory rendering
- [x] 18-04: Map trajectory layer

**Details:**
- Line geometry connecting related events
- Temporal gap-based thickness
- Hover tooltips with duration/distance
- 2D footprint on map

### Phase 19: Aggregated Bins (LOD)

**Goal**: Level-of-detail rendering for performance.
**Depends on**: Phase 18
**Plans**: 3 plans

Plans:
- [x] 19-01: Aggregation engine
- [x] 19-02: LOD switching logic
- [x] 19-03: Visual representation

**Details:**
- Screen-space density-based aggregation
- Smooth LOD transitions
- Maintains visual density at all zoom levels

### Phase 20: Server-Side Aggregation

**Goal**: Backend aggregation for large datasets.
**Depends on**: Phase 19
**Plans**: 2 plans

Plans:
- [x] 20-01: Server aggregation API
- [x] 20-02: Frontend integration

**Details:**
- DuckDB server-side binning
- Progressive data loading
- Hybrid client/server aggregation

### Phase 21: Timeline Redesign

**Goal**: Focus+Context timeline with Visx/D3.
**Depends on**: Phase 20
**Plans**: 3 plans

Plans:
- [x] 21-01: Visx/D3 foundation
- [x] 21-02: Overview + detail views
- [x] 21-03: Brush interaction

**Details:**
- Visx for React-native D3 integration
- Dual-scale timeline (overview + zoomed detail)
- Brush for range selection
- Mobile blocking overlay

### Phase 22: Contextual Slice Analysis

**Goal**: Detailed inspection of time slices via side panel.
**Depends on**: Phase 21
**Plans**: 3 plans

Plans:
- [x] 22-01: Contextual tab UI
- [x] 22-02: Slice statistics
- [x] 22-03: Point interaction and inspector

**Details:**
- Slide-in side panel
- Aggregate statistics (type/district counts)
- Point-level details
- Empty/loading states

### Phase 23: Map Interaction & Debugging

**Goal**: Enable point selection on 2D map and debug visualization.
**Depends on**: Phase 22
**Plans**: 1 plan

Plans:
- [x] 23-01: Map click selection and debug overlay

**Details:**
- onClick for point selection (replaces onMouseUp)
- Debug overlay showing click resolution
- Visual confirmation of projection accuracy

### Phase 24: Interaction Synthesis & 3D Debugging

**Goal**: Harmonize interactions across all three views.
**Depends on**: Phase 23
**Plans**: 5 plans (3 initial + 2 gap closure)

Plans:
- [x] 24-01: Coordination Store & Focus+Context
- [x] 24-02: 3D Click Targeting & Raycast Debug
- [x] 24-03: Conductor Logic (useSelectionSync hook)
- [x] 24-04: Gap - Connect Brush Range to Coordination Store
- [x] 24-05: Gap - Add Visual Raycast Line

**Details:**
- Centralized selection sync
- Robust 3D click detection (drag vs click)
- Visual raycast feedback
- Brush range dimming across views

### Phase 25: Adaptive Time Intervals & Burstiness

**Goal**: Implement adaptive time scaling based on burstiness.
**Depends on**: Phase 24
**Plans**: 4 plans

Plans:
- [x] 25-01: Foundation (Worker & Store)
- [x] 25-02: 3D Adaptive Visualization (Shader & Interaction)
- [x] 25-03: Timeline Density & Controls
- [x] 25-04: Gap - Controls Visibility & Selection

**Details:**
- Web Worker for KDE calculation
- GPU-accelerated texture-based warping
- Density heatmap in timeline
- Draggable adaptive controls
- Debounced raycast for accurate selection

---

## Milestone Summary

### Key Decisions

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| Visx for Timeline | React-native D3 integration | ✅ Excellent DX and performance |
| Mobile Blocking | Complex interactions need desktop | ✅ Explicit scope boundary |
| Worker-Store Pattern | Offload density calcs | ✅ Smooth UI during computation |
| Texture Warp | GPU lookup for performance | ✅ 60fps with complex warping |
| KDE-based Scaling | Standard burstiness metric | ✅ Intuitive density visualization |
| Arrow IPC Streaming | Binary columnar format | ✅ Efficient large data handling |
| Phase 10 Deferred | Prioritize visualization core | ✅ Thesis answerable without guided tasks |

### Issues Resolved

- ✅ Context overflow at 100+ phases (avoided via completion)
- ✅ Selection sync across views (conductor pattern)
- ✅ 3D click targeting accuracy (raycast + debounce)
- ✅ Data scale performance (columnar + aggregation)
- ✅ Brush range dimming (coordination store wiring)

### Issues Deferred (Tech Debt)

| Issue | Phase | Plan |
|-------|-------|------|
| Guided tutorial/tasks | 10 | Accept for v1.0 - use free exploration |
| timeSlices feature flag gating | 12 | Flag exists but doesn't gate - acceptable |
| trajectories feature flag gating | 12 | Flag exists but doesn't gate - acceptable |
| /api/crime/facets consumer | 06 | Route unused - remove or implement in v1.1 |

### Technical Debt

- Minor: Mock data path has null timestamps (demo mode only)
- Minor: Console.log statements for debugging (acceptable)
- Minor: Adaptive Controls UX clarity (functionally works)
- Infrastructure: LSP false positives (non-blocking)
- Infrastructure: React 19 vs Visx peer deps (acceptable workaround)

---

*For current project status, see .planning/PROJECT.md*
*For next milestone planning, see .planning/ROADMAP.md*
