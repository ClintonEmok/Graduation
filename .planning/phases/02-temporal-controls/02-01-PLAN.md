---
phase: 02-temporal-controls
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/store/useTimeStore.ts
  - src/lib/constants.ts
  - src/components/ui/slider.tsx
  - src/components/ui/select.tsx
autonomous: true
must_haves:
  truths:
    - "Store holds currentTime, isPlaying, and timeWindow state"
    - "Constants define MIN_TIME/MAX_TIME consistent with mock data"
    - "UI components (Slider, Select) are available in src/components/ui"
  artifacts:
    - path: "src/store/useTimeStore.ts"
      provides: "Zustand store for time state"
    - path: "src/lib/constants.ts"
      provides: "Time range constants"
  key_links:
    - from: "useTimeStore"
      to: "constants"
      via: "default values"
---

<objective>
Set up the foundational state management and UI components for the temporal control system.

Purpose: Provide a central source of truth for time state and reusable UI components for the controls.
Output: Zustand store, constants file, and shadcn UI components.
</objective>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install UI Components</name>
  <files>src/components/ui/slider.tsx, src/components/ui/select.tsx, components.json</files>
  <action>
    Use shadcn CLI to add `slider` and `select` components.
    If components.json exists, use `npx shadcn@latest add slider select`.
    Verify they are created in `src/components/ui`.
  </action>
  <verify>ls src/components/ui/slider.tsx src/components/ui/select.tsx</verify>
  <done>Components exist on disk</done>
</task>

<task type="auto">
  <name>Task 2: Define Time Constants</name>
  <files>src/lib/constants.ts</files>
  <action>
    Create or update `src/lib/constants.ts` to include:
    - `TIME_MIN` (e.g., 0)
    - `TIME_MAX` (e.g., 100 or 1.0 depending on Phase 1 scale - check Phase 1 code if possible, or pick reasonable default 0-100)
    - `TIME_STEP_DEFAULT` (e.g., 1)
    - `PLAYBACK_SPEED_DEFAULT` (e.g., 10 units/sec)
    - `TIME_WINDOW_DEFAULT` (e.g., 5 units)
    
    Note: Phase 1 mapped Y to Time. Assume Y range is 0-100 for now.
  </action>
  <verify>cat src/lib/constants.ts | grep TIME_MAX</verify>
  <done>Constants exported</done>
</task>

<task type="auto">
  <name>Task 3: Create Time Store</name>
  <files>src/store/useTimeStore.ts</files>
  <action>
    Create a Zustand store with:
    - State: `currentTime` (number), `isPlaying` (boolean), `timeRange` ([min, max]), `speed` (number), `timeWindow` (number).
    - Actions: `setTime`, `stepTime` (accepts direction/delta), `setIsPlaying`, `togglePlay`, `setRange`, `setSpeed`, `setTimeWindow`.
    - Use `create` from 'zustand'.
    - Initialize values from `src/lib/constants.ts`.
  </action>
  <verify>grep "useTimeStore" src/store/useTimeStore.ts && grep "stepTime" src/store/useTimeStore.ts</verify>
  <done>Store exports hook and actions</done>
</task>

</tasks>

<verification>
Check that store can be imported and constants match the intended scale.
</verification>

<success_criteria>
- useTimeStore hook is available
- Slider and Select components are ready for use
- Time constants are defined
</success_criteria>

<output>
After completion, create `.planning/phases/02-temporal-controls/02-01-SUMMARY.md`
</output>
