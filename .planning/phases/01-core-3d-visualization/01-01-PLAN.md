---
phase: 01-core-3d-visualization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [package.json, tsconfig.json, src/app/layout.tsx, src/app/page.tsx, tailwind.config.ts]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Project builds without errors"
    - "Dependencies (Three.js, MapLibre, Zustand) are installed"
    - "Directory structure exists for components and lib"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies"
      contains: "@react-three/fiber"
    - path: "src/components/viz"
      provides: "Folder for 3D components"
    - path: "src/lib"
      provides: "Folder for utilities"
  key_links:
    - from: "src/app/page.tsx"
      to: "package.json"
      via: "imports"
      pattern: "import"
---

<objective>
Initialize the Next.js project and install all core dependencies for 3D and geospatial visualization.

Purpose: Establish the technical foundation for the application.
Output: A running Next.js application with configured dependencies and folder structure.
</objective>

<execution_context>
@~/.opencode/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/phases/01-core-3d-visualization/01-CONTEXT.md
@.planning/phases/01-core-3d-visualization/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Next.js Project</name>
  <files>package.json, tsconfig.json, next.config.mjs</files>
  <action>
    Initialize a new Next.js project in the current directory using `create-next-app`.
    - Use TypeScript
    - Use Tailwind CSS
    - Use ESLint
    - Use App Router
    - Use `src/` directory
    - Use Import Alias `@/*`
    
    If the directory is not empty but contains no conflicting files, proceed.
    Clean up default boilerplate in `src/app/page.tsx` and `src/app/globals.css` (remove Vercel styles, keep Tailwind directives).
  </action>
  <verify>npm run build</verify>
  <done>Project initializes and builds successfully.</done>
</task>

<task type="auto">
  <name>Task 2: Install Core Dependencies</name>
  <files>package.json</files>
  <action>
    Install the following libraries:
    - 3D: `three`, `@types/three`, `@react-three/fiber`, `@react-three/drei`
    - Maps: `maplibre-gl`, `react-map-gl`
    - Icons: `lucide-react`
    - State: `zustand`
    - Math: `@math.gl/web-mercator` (for coordinate projection)
    
    Ensure `clsx` and `tailwind-merge` are installed for styling utilities.
  </action>
  <verify>npm list three @react-three/fiber maplibre-gl zustand</verify>
  <done>All dependencies are listed in package.json.</done>
</task>

<task type="auto">
  <name>Task 3: Establish Folder Structure</name>
  <files>src/components/viz, src/components/map, src/components/ui, src/lib, src/types, src/store</files>
  <action>
    Create the following directory structure inside `src/`:
    - `components/viz` (for R3F components)
    - `components/map` (for MapLibre components)
    - `components/ui` (for general UI)
    - `lib` (for utility functions)
    - `types` (for TypeScript definitions)
    - `store` (for Zustand stores)
    
    Add a simple placeholder `README.md` in `src/components/viz` to ensure git tracks the folder.
  </action>
  <verify>ls -R src/components</verify>
  <done>Directory structure is created.</done>
</task>

</tasks>

<verification>
Run `npm run dev` (background) and check `curl http://localhost:3000` to ensure the app serves the clean page.
</verification>

<success_criteria>
- Project is initialized with Next.js App Router and TypeScript.
- All required 3D and Map libraries are installed.
- Source directory structure is organized.
</success_criteria>

<output>
After completion, create `.planning/phases/01-core-3d-visualization/01-01-SUMMARY.md`
</output>
