---
phase: 21-timeline-redesign
plan: 02
type: execute
wave: 2
depends_on: [21-01]
files_modified: [src/components/timeline/layers/HistogramLayer.tsx, src/components/timeline/layers/MarkerLayer.tsx, src/components/timeline/layers/AxisLayer.tsx]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Histogram layer can render bars"
    - "Marker layer can render points"
  artifacts:
    - path: "src/components/timeline/layers/HistogramLayer.tsx"
      provides: "Bar visualization"
    - path: "src/components/timeline/layers/MarkerLayer.tsx"
      provides: "Dot visualization"
  key_links:
    - from: "src/components/timeline/layers/HistogramLayer.tsx"
      to: "@visx/shape"
      via: "Bar component"
---

<objective>
Build the visual presentation layers for the timeline.

Purpose: Isolate rendering logic for Histogram and Markers to enable easy switching and maintenance.
Output: Three pure functional components for the timeline layers.
</objective>

<execution_context>
@~/.opencode/get-shit-done/workflows/execute-plan.md
@~/.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@src/utils/timeline-utils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Histogram Layer</name>
  <files>src/components/timeline/layers/HistogramLayer.tsx</files>
  <action>
    Create a component that accepts:
    - `data`: Array of bins (from utils).
    - `xScale`, `yScale`: Visx/D3 scales.
    - `height`: number.
    - `color`: string.
    
    Render `<Bar>` elements from `@visx/shape`.
    Ensure bars are positioned correctly based on scales.
  </action>
  <verify>
    File exists and imports @visx/shape.
  </verify>
  <done>
    Component compiles.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Marker Layer</name>
  <files>src/components/timeline/layers/MarkerLayer.tsx</files>
  <action>
    Create a component that accepts:
    - `data`: Array of raw data points.
    - `xAccessor`: Function to get x value.
    - `xScale`: Visx/D3 scale.
    - `height`: number.
    
    Render `<circle>` or `<line>` elements for each point.
    Optimize rendering (use simple SVG circles).
  </action>
  <verify>
    File exists.
  </verify>
  <done>
    Component compiles.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Axis Layer</name>
  <files>src/components/timeline/layers/AxisLayer.tsx</files>
  <action>
    Create a wrapper around `@visx/axis` `AxisBottom`.
    Style it to match the "Detailed: Ticks, labels" requirement.
    Accept `scale` and `top` (y-position) as props.
  </action>
  <verify>
    File exists and imports @visx/axis.
  </verify>
  <done>
    Component compiles.
  </done>
</task>

</tasks>

<verification>
Ensure all layers export a valid React component.
</verification>

<success_criteria>
- Visual components created.
- Ready for composition in Timeline.
</success_criteria>

<output>
After completion, create `.planning/phases/21-timeline-redesign/21-02-SUMMARY.md`
</output>
