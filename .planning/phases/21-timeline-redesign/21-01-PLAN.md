---
phase: 21-timeline-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [package.json, src/components/timeline/TimelineContainer.tsx, src/components/timeline/Timeline.tsx]
autonomous: true
must_haves:
  truths:
    - "Visx dependencies are installed"
    - "Timeline container blocks interactions on mobile"
    - "Timeline container resizes responsively"
  artifacts:
    - path: "package.json"
      provides: "Visx dependencies"
    - path: "src/components/timeline/TimelineContainer.tsx"
      provides: "Responsive wrapper and mobile guard"
    - path: "src/components/timeline/Timeline.tsx"
      provides: "Visx ParentSize and Scale initialization"
  key_links:
    - from: "src/components/timeline/TimelineContainer.tsx"
      to: "src/components/timeline/Timeline.tsx"
      via: "Render prop or children"
---

<objective>
Initialize the Phase 21 Timeline Redesign by setting up the dependencies and the responsive container architecture.
Purpose: Establish the foundation for the Visx-based timeline, handling responsiveness and mobile constraints upfront.
Output: A working, empty timeline container that respects screen size.
</objective>

<execution_context>
@~/.opencode/get-shit-done/workflows/execute-plan.md
@~/.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/21-timeline-redesign/21-RESEARCH.md
@.planning/phases/21-timeline-redesign/21-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Visx Dependencies</name>
  <files>package.json</files>
  <action>
    Install the required Visx packages identified in research.
    Note: The project uses React 19, so use --legacy-peer-deps to avoid conflicts if Visx hasn't updated peer deps yet.
    
    Packages:
    - @visx/brush
    - @visx/shape
    - @visx/scale
    - @visx/responsive
    - @visx/group
    - @visx/event
    - @visx/axis
  </action>
  <verify>
    npm list @visx/brush @visx/shape @visx/scale @visx/responsive @visx/group @visx/event @visx/axis
  </verify>
  <done>All packages installed and listed in package.json</done>
</task>

<task type="auto">
  <name>Task 2: Create TimelineContainer</name>
  <files>src/components/timeline/TimelineContainer.tsx</files>
  <action>
    Create a container component that:
    1. Uses Tailwind to hide content and show a blocking message on mobile (`md:hidden` pattern).
    2. Renders the main timeline area on desktop (`hidden md:block`).
    3. Positions the container at the bottom of the screen (fixed/sticky) or integrates into the layout as per Phase 20 state.
    
    Structure:
    ```tsx
    import { Timeline } from './Timeline';

    export function TimelineContainer() {
      return (
        <div className="w-full border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 fixed bottom-0 left-0 right-0 z-40">
          {/* Mobile Overlay */}
          <div className="md:hidden p-4 text-center text-muted-foreground flex items-center justify-center h-24">
            <p>Please use a desktop device to interact with the timeline.</p>
          </div>
          
          {/* Desktop Content */}
          <div className="hidden md:block w-full h-48 p-4">
             <Timeline /> 
          </div>
        </div>
      )
    }
    ```
  </action>
  <verify>
    Check file creation.
  </verify>
  <done>Component exists with mobile blocking logic</done>
</task>

<task type="auto">
  <name>Task 3: Initialize Timeline Orchestrator</name>
  <files>src/components/timeline/Timeline.tsx</files>
  <action>
    1. Create `src/components/timeline/Timeline.tsx`.
    2. Use `@visx/responsive`'s `ParentSize` to wrap the inner content.
    3. Define the structure for scales and data handling.
    
    Code Pattern:
    ```tsx
    'use client';
    import { ParentSize } from '@visx/responsive';
    
    const TimelineContent = ({ width, height }: { width: number; height: number }) => {
       if (width < 10) return null; // Avoid render on initial layout
       return (
         <svg width={width} height={height}>
            <rect width={width} height={height} fill="transparent" />
            <text x="10" y="20" fill="white">Timeline Ready</text>
         </svg>
       );
    };

    export function Timeline() {
      return (
        <div className="w-full h-full min-h-[150px]">
          <ParentSize>
            {({ width, height }) => <TimelineContent width={width} height={height} />}
          </ParentSize>
        </div>
      );
    }
    ```
  </action>
  <verify>
    Verify `ParentSize` usage.
  </verify>
  <done>Timeline component renders a placeholder SVG that resizes with the window</done>
</task>

</tasks>

<verification>
- Build passes (`npm run build` or `next build`)
- Container hides on small screens (can verify via code inspection of classes)
</verification>

<success_criteria>
- [ ] Visx libraries installed
- [ ] TimelineContainer handles mobile blocking
- [ ] Timeline component uses ParentSize for responsiveness
</success_criteria>

<output>
After completion, create .planning/phases/21-timeline-redesign/21-01-SUMMARY.md
</output>
