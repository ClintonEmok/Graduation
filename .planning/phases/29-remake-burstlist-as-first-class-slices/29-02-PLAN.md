---
phase: 29-remake-burstlist-as-first-class-slices
plan: 02
type: execute
wave: 2
depends_on: [29-01]
files_modified:
  - src/app/timeline-test/components/SliceList.tsx
  - src/app/timeline-test/components/SliceToolbar.tsx
autonomous: true

must_haves:
  truths:
    - Burst-derived slices display "Burst" chip in slice list
    - Burst slices look like manual slices but with subtle burst indicator
    - Slice list sorts by timeline start time
    - Burst chip styling is subtle (small, muted color)
  artifacts:
    - path: src/app/timeline-test/components/SliceList.tsx
      provides: Unified list showing both manual and burst slices
      contains: isBurst.*chip|Burst.*badge
    - path: src/app/timeline-test/components/SliceToolbar.tsx
      provides: Burst indicator styling reference
      min_lines: 10
  key_links:
    - from: SliceList
      to: useSliceStore.slices
      via: subscription with isBurst filter
      pattern: useSliceStore.*slices
---

<objective>
Update the slice list UI to present a unified view of manual and burst-derived slices with visual distinction for burst origin.

Purpose: Provide UX parity between manual and burst slices while making burst origin clear to users.
Output: Enhanced SliceList component with burst chip indicator and proper sorting.
</objective>

<execution_context>
@~/.opencode/get-shit-done/workflows/execute-plan.md
@~/.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/29-remake-burstlist-as-first-class-slices/29-CONTEXT.md

@src/app/timeline-test/components/SliceList.tsx
@src/store/useSliceStore.ts

## Context from 29-CONTEXT.md

### Slice list presentation parity
- Use one unified slice list for manual and burst-derived slices
- Keep card UI parity with manual slices; add only a minimal `Burst` chip until renamed
- Keep `Burst N` naming until user renames
- Sort list by timeline start time

### Claude's Discretion
- Exact visual styling of the optional `Burst` chip (size/color/placement) as long as it stays subtle

## Current SliceList

Currently displays:
- Slice name or "Slice N" default
- Range label with timestamps
- Selected state with amber highlighting
- Delete button

Does NOT yet show:
- Burst indicator
- Burst-derived slices (will appear once 29-01 adds them)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add burst chip to slice list items</name>
  <files>src/app/timeline-test/components/SliceList.tsx</files>
  <action>
Update SliceList.tsx to show burst indicator for burst-derived slices:

1. Import necessary icons (suggest Sparkles or Zap from lucide-react for burst)

2. Modify slice item rendering to show:
   - Current: Name ("Slice N" or custom), Selected badge
   - Add: Burst chip (only for isBurst: true AND name starts with "Burst")

3. Burst chip design (keep subtle):
   ```tsx
   {slice.isBurst && slice.name?.startsWith('Burst') && (
     <span className="inline-flex items-center gap-1 rounded bg-slate-700/50 px-1.5 py-0.5 text-[10px] text-slate-400">
       <Sparkles className="h-3 w-3" />
       Burst
     </span>
   )}
   ```
   Or use a simpler badge without icon:
   ```tsx
   <span className="rounded bg-slate-800 px-1.5 py-0.5 text-[10px] text-slate-500">
     burst
   </span>
   ```

4. Naming logic update:
   - Current: `slice.name ?? \`Slice ${index + 1}\``
   - New: Count manual slices separately from burst slices for naming
   - Actually, simpler: just show `slice.name` since 29-01 sets "Burst N"
   - For manual slices with no name, show "Slice N" where N counts manual slices only

Implementation approach:
```typescript
const getSliceDisplayName = (slice: TimeSlice, index: number, allSlices: TimeSlice[]): string => {
  if (slice.name) return slice.name;
  if (slice.isBurst) {
    // Count burst slices up to this one
    const burstIndex = allSlices
      .filter(s => s.isBurst)
      .findIndex(s => s.id === slice.id);
    return `Burst ${burstIndex + 1}`;
  }
  // Count manual slices up to this one
  const manualIndex = allSlices
    .filter(s => !s.isBurst)
    .findIndex(s => s.id === slice.id);
  return `Slice ${manualIndex + 1}`;
};
```

5. Update delete button aria-label to use display name

Keep styling consistent with existing SliceList aesthetic (dark theme, slate colors).
  </action>
  <verify>Visual inspection: burst slice shows subtle chip, manual slices don't</verify>
  <done>SliceList displays burst chip for burst-derived slices, proper naming logic</done>
</task>

<task type="auto">
  <name>Task 2: Verify sorting and empty states</name>
  <files>src/app/timeline-test/components/SliceList.tsx</files>
  <action>
Verify and polish SliceList sorting and empty states:

1. Confirm slices arrive sorted from store (from 29-01)
   - If not sorted, add client-side sort as safety
   - Sort by: range[0] or time, manual before burst at same time

2. Empty state improvements:
   - Current: "No slices created yet"
   - Keep simple, but maybe hint at creation methods
   - Not required, current is fine

3. Mixed list edge cases:
   - Ensure burst and manual slices interleave correctly by time
   - Test: manual slice at t=10, burst at t=5, burst at t=15
   - Expected order: burst t=5, manual t=10, burst t=15

4. Accessibility:
   - Add aria-label indicating burst origin
   - Example: `aria-label="${displayName} (burst-derived)"` when isBurst

5. Test the display in timeline-test route:
   - Will need burst data (use mock or create test burst)
   - Verify visual hierarchy is clear

Polish items:
- Ensure burst chip doesn't wrap awkwardly
- Ensure long slice names truncate gracefully
- Ensure selected state clearly visible with burst chip
  </action>
  <verify>Manual test: mixed manual/burst slices display correctly sorted</verify>
  <done>Slices display in correct chronological order, burst indicator visible, accessible</done>
</task>

</tasks>

<verification>
After all tasks:
- [ ] SliceList shows burst chip for burst-derived slices
- [ ] Chip styling is subtle (small, muted color, not distracting)
- [ ] Manual and burst slices are sorted together by start time
- [ ] Naming shows "Slice N" for manual, "Burst N" for burst
- [ ] Selected state visible with burst chip
- [ ] Accessibility labels indicate burst origin
</verification>

<success_criteria>
- Unified slice list displays both types seamlessly
- Burst origin is clear but not overwhelming
- Sorting is intuitive (chronological)
- UI maintains existing aesthetic
</success_criteria>

<output>
After completion, create `.planning/phases/29-remake-burstlist-as-first-class-slices/29-02-SUMMARY.md`
</output>
