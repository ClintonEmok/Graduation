---
phase: 35-semi-automated-timeslicing-workflows
plan: 03
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: true

must_haves:
  truths:
    - "User can generate mock suggestions to test workflow"
    - "Accept action moves suggestion to accepted state"
    - "Reject action moves suggestion to rejected state"
    - "Modify action enables editing suggestion parameters"
  artifacts:
    - path: "src/app/timeslicing/components/SuggestionToolbar.tsx"
      provides: "Toolbar with Generate button and actions"
    - path: "src/hooks/useSuggestionTrigger.ts"
      provides: "Trigger mechanism hook for generating suggestions"
---

<objective>
Add suggestion generation trigger and action handlers - the core workflow logic.
</objective>

<execution_context>
@~/.opencode/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/phases/35-semi-automated-timeslicing-workflows/35-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Create useSuggestionTrigger hook</name>
  <files>src/hooks/useSuggestionTrigger.ts</files>
  <action">
Create useSuggestionTrigger hook following research patterns:
- Accept triggerMode: 'manual' | 'automatic' | 'on-demand' (start with 'manual')
- For manual mode: expose trigger function that generates mock suggestions
- Mock suggestion generator:
  - Create 2-3 sample warp profile suggestions with varying confidence (60-95%)
  - Create 2-3 sample interval boundary suggestions
  - Use addSuggestion from useSuggestionStore
- Export: { trigger, hasSuggestions, suggestionCount, mode }
- This is a foundation - real generation logic comes in phases 36-37
  </action>
  <verify>Hook can be imported and generates mock suggestions</verify>
  <done>Trigger hook created with mock suggestion generation</done>
</task>

<task type="auto">
  <name>Create SuggestionToolbar component</name>
  <files>src/app/timeslicing/components/SuggestionToolbar.tsx</files>
  <action">
Create SuggestionToolbar:
- "Generate Suggestions" button - triggers suggestion generation
- Badge showing pending suggestion count
- "Clear All" button to remove all suggestions
- Uses useSuggestionTrigger hook for generate action
- Uses useSuggestionStore for suggestion count
- Styling: toolbar at top of panel or page, use Button from ui/button
- Include: lucide-react icons (Sparkles for generate, Trash for clear)
  </action>
  <verify>Toolbar renders with Generate button and count badge</verify>
  <done>Toolbar component with working generate action</done>
</task>

<task type="auto">
  <name>Wire up Accept action</name>
  <files>src/store/useSuggestionStore.ts</files>
  <action">
Update useSuggestionStore acceptSuggestion action:
- When accepting a suggestion: mark status as 'accepted'
- Additional: if accepted suggestion is a warp-profile, could sync to useWarpSliceStore (defer to future)
- If interval-boundary, could sync to useSliceStore (defer to future)
- For now: just mark as accepted, store persists in state
  </action>
  <verify>Clicking Accept updates suggestion status to 'accepted'</verify>
  <done>Accept action works correctly</done>
</task>

<task type="auto">
  <name>Wire up Reject action</name>
  <files>src/store/useSuggestionStore.ts</files>
  <action">
Update useSuggestionStore rejectSuggestion action:
- Mark status as 'rejected'
- Could optionally remove from list or keep with rejected status (keep for history)
  </action>
  <verify>Clicking Reject updates suggestion status to 'rejected'</verify>
  <done>Reject action works correctly</done>
</task>

<task type="auto">
  <name>Wire up Modify action (basic parameter adjustment)</name>
  <files>src/store/useSuggestionStore.ts</files>
  <action">
Implement modifySuggestion action:
- Opens modification interface (can be inline or modal - start simple)
- For warp-profile: allow adjusting warp strength, start/end times
- For interval-boundary: allow adjusting boundary positions
- After modification: mark status as 'modified'
- Use modifySuggestion(suggestionId, updates) from store
  </action>
  <verify>Modify button opens adjustment UI and saves changes</verify>
  <done>Modify action enables parameter adjustment</done>
</task>

</tasks>

<verification>
- [ ] Generate button creates mock suggestions
- [ ] Accept button marks suggestion as accepted
- [ ] Reject button marks suggestion as rejected
- [ ] Modify button allows editing parameters
- [ ] Suggestion count badge updates correctly
</verification>

<success_criteria>
Core workflow - generate, accept, reject, modify - all functional
</success_criteria>

<output>
After completion, create `.planning/phases/35-semi-automated-timeslicing-workflows/35-03-SUMMARY.md`
</output>
