---
phase: 04-ui-layout-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/components/ui/resizable.tsx
  - src/components/layout/DashboardLayout.tsx
  - src/app/layout-test/page.tsx
autonomous: true
must_haves:
  truths:
    - "Project has resizable panel dependencies installed"
    - "DashboardLayout component exists with 3-pane structure"
    - "Test route /layout-test renders the layout with placeholders"
  artifacts:
    - path: "src/components/layout/DashboardLayout.tsx"
      provides: "Split-pane layout shell"
    - path: "src/components/ui/resizable.tsx"
      provides: "Shadcn UI resizable primitives"
  key_links:
    - from: "src/components/layout/DashboardLayout.tsx"
      to: "src/components/ui/resizable.tsx"
      via: "import"
---

<objective>
Establish the core layout infrastructure using react-resizable-panels.
Purpose: Create the structural shell for the Map/Cube/Timeline layout before adding complex visualizations.
Output: A working DashboardLayout component and a test route to verify resizing behavior.
</objective>

<execution_context>
@.planning/phases/04-ui-layout-redesign/04-RESEARCH.md
</execution_context>

<tasks>

<task type="auto">
  <name>Install dependencies</name>
  <files>package.json</files>
  <action>
    Install required libraries:
    - `react-resizable-panels`
    - `react-map-gl`
    - `maplibre-gl`
    
    Add shadcn/ui resizable component:
    - Run `npx shadcn@latest add resizable`
    - (If prompted for overwrites, accept defaults or verify no destructive changes)
  </action>
  <verify>
    grep "react-resizable-panels" package.json && ls src/components/ui/resizable.tsx
  </verify>
  <done>
    Dependencies installed and UI component exists.
  </done>
</task>

<task type="auto">
  <name>Create DashboardLayout component</name>
  <files>src/components/layout/DashboardLayout.tsx</files>
  <action>
    Create `src/components/layout/DashboardLayout.tsx`.
    
    Structure:
    - Props: `{ mapSlot, vizSlot, timelineSlot }` (ReactNodes)
    - Root: `ResizablePanelGroup` (vertical)
    - Top Panel (75%): `ResizablePanelGroup` (horizontal)
      - Left: `ResizablePanel` (50%) -> `{mapSlot}`
      - Handle
      - Right: `ResizablePanel` (50%) -> `{vizSlot}`
    - Handle
    - Bottom Panel (25%): `ResizablePanel` -> `{timelineSlot}`
    
    Styling:
    - Use `h-screen w-full overflow-hidden`.
    - Ensure panels have minimal styling to allow slots to fill them.
  </action>
  <verify>
    File exists and contains nested ResizablePanelGroup structure.
  </verify>
  <done>
    Component created with correct props and nesting.
  </done>
</task>

<task type="auto">
  <name>Create verification route</name>
  <files>src/app/layout-test/page.tsx</files>
  <action>
    Create a temporary test page at `src/app/layout-test/page.tsx`.
    
    Implementation:
    - Import `DashboardLayout`.
    - Pass colored divs as slots:
      - mapSlot: `<div className="w-full h-full bg-red-100 p-4">Map Placeholder</div>`
      - vizSlot: `<div className="w-full h-full bg-blue-100 p-4">Cube Placeholder</div>`
      - timelineSlot: `<div className="w-full h-full bg-green-100 p-4">Timeline Placeholder</div>`
  </action>
  <verify>
    File exists. Manual verification will require visiting /layout-test later.
  </verify>
  <done>
    Test route created.
  </done>
</task>

</tasks>

<verification>
Run `npm run build` (or verify types) to ensure no import errors.
</verification>

<success_criteria>
- [ ] Dependencies installed
- [ ] DashboardLayout.tsx implements the 3-pane structure
- [ ] /layout-test route exists for visual verification
</success_criteria>

<output>
After completion, create .planning/phases/04-ui-layout-redesign/04-01-SUMMARY.md
</output>
