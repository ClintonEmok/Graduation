---
phase: 04-ui-layout-redesign
plan: 05
type: execute
wave: 1
depends_on: [04-04]
files_modified:
  - src/components/layout/DashboardLayout.tsx
autonomous: true
gap_closure: true
must_haves:
  truths:
    - "Timeline spans the full width at the bottom"
    - "Map and Cube are side-by-side above the Timeline"
  artifacts:
    - path: "src/components/layout/DashboardLayout.tsx"
      provides: "Top-Bottom / Left-Right layout structure"
  key_links:
    - from: "src/app/page.tsx"
      to: "src/components/layout/DashboardLayout.tsx"
      via: "props (mapSlot, vizSlot, timelineSlot)"
---

<objective>
Restructure the Dashboard layout to match the user preference: Full-width Timeline at the bottom, with Map and Cube side-by-side above it.
Purpose: Close the gap between implemented layout (Left/Right) and requested layout (Top/Bottom).
Output: A DashboardLayout component where the root split is Vertical.
</objective>

<context>
@src/components/layout/DashboardLayout.tsx
</context>

<tasks>

<task type="auto">
  <name>Refactor DashboardLayout Structure</name>
  <files>src/components/layout/DashboardLayout.tsx</files>
  <action>
    Modify `DashboardLayout.tsx` to invert the grouping logic.
    
    Current Structure (to replace):
    - Horizontal Group
      - Left Panel (Map)
      - Right Panel (Group Vertical: Cube / Timeline)
      
    New Structure (to implement):
    - Vertical Group (id="root-group")
      - Top Panel (id="top-content", size ~75%)
        - Horizontal Group (id="content-group")
          - Left Panel (Map, id="map-panel", size ~50%)
          - Resize Handle
          - Right Panel (Cube, id="cube-panel", size ~50%)
      - Resize Handle
      - Bottom Panel (Timeline, id="timeline-panel", size ~25%)
      
    Ensure all `Panel` and `Group` components import from `react-resizable-panels`.
    Update `useLayoutStore` interactions if necessary (or verify keys match).
    Ensure styling uses `h-full w-full` to fill the viewport.
  </action>
  <verify>
    grep 'orientation="vertical"' src/components/layout/DashboardLayout.tsx | head -n 1
    # Should confirm the outer group is vertical
  </verify>
  <done>
    Layout structure matches Top(Map|Cube)/Bottom(Timeline).
  </done>
</task>

</tasks>

<verification>
Verify component structure has changed to Vertical root.
</verification>

<success_criteria>
- [ ] Root panel group is Vertical
- [ ] Top panel contains Map and Cube (Horizontal)
- [ ] Bottom panel contains Timeline
</success_criteria>

<output>
After completion, create .planning/phases/04-ui-layout-redesign/04-05-SUMMARY.md
</output>
