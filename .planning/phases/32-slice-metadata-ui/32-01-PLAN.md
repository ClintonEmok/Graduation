---
phase: 32-slice-metadata-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/store/useSliceStore.ts
autonomous: true

must_haves:
  truths:
    - "TimeSlice type includes optional color field"
    - "TimeSlice type includes optional notes field"
    - "useSliceStore persists slices with color and notes"
    - "New slices default to undefined color and notes"
  artifacts:
    - path: "src/store/useSliceStore.ts"
      provides: "TimeSlice interface with color and notes fields"
      contains: "color?: string; notes?: string;"
    - path: "src/store/useSliceStore.ts"
      provides: "updateSlice handles color and notes updates"
      contains: "updateSlice.*color|updateSlice.*notes"
  key_links:
    - from: "useSliceStore"
      to: "TimeSlice"
      via: "type definition"
      pattern: "export interface TimeSlice"
---

<objective>
Extend TimeSlice data model to support color and notes metadata.

Purpose: Provide the foundational data fields needed for slice coloring and annotation features.

Output: TimeSlice type with color and notes optional fields; store updated to handle these fields.
</objective>

<execution_context>
@~/.opencode/get-shit-done/workflows/execute-plan.md
@~/.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
# Existing Model
@src/store/useSliceStore.ts (lines 9-19) defines TimeSlice:
- id: string
- name?: string
- type: 'point' | 'range'
- time: number
- range?: [number, number]
- isBurst?: boolean
- burstSliceId?: string
- isLocked: boolean
- isVisible: boolean

# New Fields to Add
- color?: string (preset color name, e.g., 'amber', 'blue', 'green')
- notes?: string (free-form text annotation)

# Persistence
- Zustand persist middleware already configured (name: 'slice-store-v1')
- Adding fields to TimeSlice is backward compatible
</context>

<tasks>

<task type="auto">
  <name>Add color and notes fields to TimeSlice interface</name>
  <files>src/store/useSliceStore.ts</files>
  <action>
Add two optional fields to the TimeSlice interface (around line 9-19):

```typescript
export interface TimeSlice {
  id: string;
  name?: string;
  color?: string;      // NEW: preset color name (amber, blue, green, red, purple, cyan, pink, gray)
  notes?: string;     // NEW: free-form annotation text
  type: 'point' | 'range';
  // ... existing fields remain unchanged
}
```

These fields are optional to maintain backward compatibility with existing slices that don't have them.
  </action>
  <verify>
Verify TimeSlice interface includes color and notes fields by reading the updated file.
  </verify>
  <done>TimeSlice interface has optional color?: string and notes?: string fields</done>
</task>

</tasks>

<verification>
1. TimeSlice type includes color?: string
2. TimeSlice type includes notes?: string
3. Existing slices without these fields continue to work
4. New slices can have these fields set via updateSlice
</verification>

<success_criteria>
- TimeSlice interface updated with color and notes fields
- TypeScript compilation succeeds
- Existing slice functionality unchanged
</success_criteria>

<output>
After completion, create `.planning/phases/32-slice-metadata-ui/32-01-SUMMARY.md`
</output>
