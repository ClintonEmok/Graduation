---
phase: 37-algorithm-integration
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - src/store/useSuggestionStore.ts
  - src/app/timeslicing/components/SuggestionPanel.tsx
  - src/app/timeslicing/components/SuggestionToolbar.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Compare two suggestions side by side"
    - "Tooltips explain controls"
    - "View history of accepted suggestions"
  artifacts:
    - path: "src/store/useSuggestionStore.ts"
      provides: "Comparison and history state"
---

<objective>
Add comparison mode, tooltips, and history - advanced features for better decision making.

Purpose: Help users make informed decisions by comparing suggestions and tracking choices.
</objective>

<context>
Current state:
- No way to compare multiple suggestions
- Controls have no explanations
- No record of accepted suggestions

These are advanced UX features for informed decision-making.
</context>

<tasks>

<task type="auto">
  <name>Add comparison mode</name>
  <files>src/store/useSuggestionStore.ts, src/app/timeslicing/components/SuggestionPanel.tsx</files>
  <action>
    Enable side    1.-by-side comparison:
 Add comparisonIds array to store (max 2 suggestions)
    2. Add "Compare" button to each SuggestionCard when 2 selected
    3. Create ComparisonView component showing both suggestions side by side
    4. In comparison: show confidence, intervals/boundaries, visual diff
    5. Allow accepting from comparison view
  </action>
  <verify>Can select two suggestions and view side-by-side</verify>
  <done>Comparison mode enables informed selection</done>
</task>

<task type="auto">
  <name>Add tooltips to controls</name>
  <files>src/app/timeslicing/components/SuggestionToolbar.tsx</files>
  <action>
    Add explanatory tooltips:
    1. Add tooltip/hint component or use title attributes
    2. Add tooltips to: Generate button, Warps slider, Intervals slider, Snapping, Method
    3. Tooltip content:
       - "Generate Suggestions": "Create new warp profile and interval boundary suggestions based on current data"
       - "Warps": "Number of warp profiles to generate (affects time scaling)"
       - "Intervals": "Number of boundary sets to generate"
       - "Snapping": "Round boundaries to hour/day boundaries"
       - "Method": "Algorithm used to detect boundaries"
  </action>
  <verify>Hovering controls shows explanatory tooltip</verify>
  <done>Users understand what each control does</done>
</task>

<task type="auto">
  <name>Add suggestion history</name>
  <files>src/store/useSuggestionStore.ts, src/app/timeslicing/components/SuggestionPanel.tsx</files>
  <action>
    Track accepted suggestions:
    1. Add acceptedHistory array to store: { id, suggestion, acceptedAt }
    2. When accepting, add to history
    3. Add "History" tab or section in panel
    4. Show: type, confidence, date accepted, parameters
    5. Allow re-applying from history (accept again)
  </action>
  <verify>Accepted suggestions appear in history</verify>
  <done>Users can review and re-apply previous suggestions</done>
</task>

</tasks>

<verification>
- [ ] Comparison view shows two suggestions side by side
- [ ] Tooltips appear on hover for controls
- [ ] History shows past accepted suggestions
</verification>

<success_criteria>
Comparison, tooltips, and history implemented
</success_criteria>

<output>
After completion, create `.planning/phases/37-algorithm-integration/37-06-SUMMARY.md`
</output>
